/**
* Generated by go-doudou v1.3.3.
* You can edit it as your need.
 */
package service

import (
	"context"
	"fmt"

	"github.com/unionj-cloud/helloworld/config"

	pb "github.com/unionj-cloud/helloworld/transport/grpc"
)

var _ Helloworld = (*HelloworldImpl)(nil)

var _ pb.HelloworldServiceServer = (*HelloworldImpl)(nil)

type HelloworldImpl struct {
	pb.UnimplementedHelloworldServiceServer

	conf *config.Config
}

func (receiver *HelloworldImpl) Greeting(ctx context.Context, greeting string) (data string, err error) {
	return fmt.Sprintf("Hello %s", greeting), nil
}

func NewHelloworld(conf *config.Config) *HelloworldImpl {
	return &HelloworldImpl{
		conf: conf,
	}
}

func (receiver *HelloworldImpl) GreetingRpc(ctx context.Context, request *pb.GreetingRpcRequest) (*pb.GreetingRpcResponse, error) {
	data, err := receiver.Greeting(ctx, request.Greeting)
	if err != nil {
		return nil, err
	}
	return &pb.GreetingRpcResponse{
		Data: data,
	}, nil
}
